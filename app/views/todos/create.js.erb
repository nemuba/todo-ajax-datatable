$('turbolinks:load').ready(function() {
  <!-- Verifica se não houve nenhum erro e carrega os dados através da chamada AJAX -->
  <% if @todo.errors.empty? %>
    <!-- Fecha o modal -->
    App.closeModal();

    <!-- Recarrega o datatable usando a chamada AJAX -->
    App.refreshDataTableAjax();

    Toastify({
      text: 'Criado com sucesso!',
      duration: 3000,
      gravity: 'top',
      position: 'right',
      backgroundColor: 'linear-gradient(to right, #00b09b, #96c93d)',
      stopOnFocus: true,
    }).showToast();
  
  <!-- Se houver erro recarrega o modal -->
  <% else %>
    <!-- Fecha o modal -->
    App.closeModal();

    <!-- Recarrega o modal -->
    App.renderModal('<%= j render("shared/modal", modal_title: 'New Todo') { render("form", todo: @todo ) } %>');

    Toastify({
      text: 'Preencha todos os campos !',
      duration: 3000,
      gravity: 'top',
      position: 'right',
      backgroundColor: 'linear-gradient(to right, #ff5f6d, #ffc371)',
      stopOnFocus: true,
    }).showToast();
  <% end %>

});

