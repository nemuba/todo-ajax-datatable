$('turbolinks:load').ready(function() {

  <!-- Verifica se não teve algum erro -->
  <% if @todo.errors.empty? %>

    <!-- Fecha modal -->
    App.Todo.closeModal();
  
    <!-- Recarrega o datatable -->
    App.Todo.refreshDataTableAjax();

    <!-- Exibe mensagem de sucesso -->
    Toast.success('Atualizado com sucesso!');

  <!-- Senão recarrega o modal com os erros -->
  <% else %>
    <!-- Renderiza os erros -->
    App.Todo.render_errors('<%= j render 'errors', todo: @todo %>')

    <!-- Exibe mensagem de erro -->
    Toast.error('Preencha todos os campos!');
  <% end %>
});

